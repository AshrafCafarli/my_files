select * from logix order by id desc
insert into logix(name,surname,email) values('asraf','ceferli','asraf_ceferli' )


select max(id) as maxID from logix
select AVG(id) as avgID from logix
select SUM(id) as sumId from logix

select * from logix where name like '%ashra%' --bir nece herf ve ya herf olmasa bele
select * from logix where name like '_s%'  --1 herf ucun maska


select * from logix where name in('asraf')
select * from logix where name in (select name from logix where id between  4 and 5)

create table destec(id integer, productName varchar(25),ProductDate date)
select * from destec
alter table destec alter column id integer not null
alter table destec add constraint[Pk_destec] primary key (id) --constraint ile primary keyi silmek ucun ad vermeliyik

select GETDATE()  -- bu anki tarix ve saati getiri ekrana
select DATEPART(year,getdate()) -- hazirki tarixin ilini getririr cvb 2017
select DATEPART(HH,getdate()) -- hazirki saati getirir  cvb 12

alter table destec add constraint[Pk_destec] foreign key id --constraint ile primary keyi silmek ucun ad vermeliyik
alter table destec drop constraint Pk_destec -- silerken constraintde yazdigimiz addan istifade edirik

select * from destec
alter table destec add constraint[Pk_id] primary key (id)
insert into destec values(3,'asd','2016.02.25')
select * from logix inner join destec on logix.id=destec.id
select logix.id,logix.name,destec.productname from logix left join destec on logix.id=destec.id
select destec.id,logix.name,logix.surname,destec.productname,destec.productdate from logix right join destec on logix.id=destec.id
select * from logix full join destec on logix.id=destec.id

select  name as name from logix
	union all select productname  from destec --- hemin bu cedverlleri alt alta birlesdirir

select COUNT(id) from logix group by name-- riyazi hesablamalarla isleyib alinan neticeni qruplasdirir . meselen burda
				-- adlara gore qruplasdirib onlarin sayni taparaq uygun idleri ekrana verir


create table Cars(id integer identity,model varchar(25),Car_year date,Service_Id integer ,foreign key (id) references driver(id)) ---- foreign key

select * from ServiceCar

select COUNT(servicename) sayi,Servicename from ServiceCar group by Servicename order by sayi


select count(name) id,name from logix group by name having count(name)=2 order by id

select * from INFORMATION_SCHEMA.TABLES

select destec.id from destec where exists (select * from logix where id=destec.id)


select * from nlogix

select id,surname,name into [nlogix] from logix

drop table nlogix

insert into ndestec(id,dname) select nlogix.id,nlogix.surname from nlogix--- nlogixde id, surname-ni destecde uygun id.dname-e daxil edir

 truncate table asa   -- asa adli cedvli silib tekrar yaradir -- bunun sheert vermeden de delete from asa deyerek silmek olar. ancaq yeni melumat artiranda eger id- avtomatik artandisa (identity) ozaman novbeti ededden meselen 100-den basliyacaq . ancaq truncate hershe




select right(tehsil_nov,5) from sm_telebe  ---sagdan 5 character cixarir eekrana
select LEFT(tehsil_nov,5) from sm_telebe -----soldan 5character cixarir ekrana
select SUBSTRING(tehsil_nov,1,5) from sm_telebe -----1den sonra 5 character


select UPPER (tehsil_nov )from sm_telebe  ------- boyuk herflerle ekrana cxarir neticeni
select LOWER(tehsil_nov) from sm_telebe --- eger boyukduse kicik herflerle ekrana cixaracaq


alter table sm_telebe add yeni_sutun varchar(25)
alter table sm_telebe alter column yeni_sutun int      --- sutun tipi deismek
alter table sm_telebe drop column yeni_sutun 


select * from sm_telebe where t_name like '[as]%'   --- baslangici  a v e ya sile basliyanlar
select * from sm_telebe where t_name like '[^a]%'  -- baslangici a ile baslamiyanlari ekrana cxartsin
select * from sm_telebe where t_name like '[a-f]%'   -- baslangic herfi a ile f arasinda olanlari ekrana cxartsin


select distinct t_name,LEN(t_name) from sm_telebe where len(t_name)>2 ---  len herf sayini getirir, distinct eyni olanlari bir deefe getirir

select *,REPLACE(t_name,'as','sa') from sm_telebe   -- as olan hisseleri deisib sa olaraq cxardir
select *, REVERSE(t_name) from sm_telebe   -- tersden yazdirir adlari
select ABS(-5)  --  mutleq(musbet ) qiymetini cxarir

t
select FLOOR(2.7)  --2  asagi srhede yuvarlaqlasdirir
select ROUND(2.265525,3)  --2.266 vergulden sonra 3 hisseye qeder yuvarlaqlasdirir
select ROUND(hesab,2) from table

select POWER (2,3)   --2 ustu 3 hesablayir cvb 8
select sqrt(25)  -- kokaltina salir cvb 5
sselect sum(column)  from table  --- cemleyir hamsini	

select DATEDIFF(YEAR,'1995-09-04',GETDATE()) -- 1995-de indiye qeder olan ili hesablayir cvb 22
 \
select DATEADD(MONTH,10,GETDATE())  -- ustune 10 ay gelib hmin tarixi ekrana cixardir


		--ay uzre hesabat misal
		select case Month(tarix) when 1 then 'yanvar'
                         when 2 then 'fevral'
                         when 3 then 'mart' 
                         when 4 then 'aprel' 
                         when 5 then 'may'
                         when 6 then 'iyun'
                         when 7 then 'iyul'
                         
                         end
                          
                          
                          aylar,sum(mebleg) [mebleg cem],sum(miqdar) [miqdar cem],sum(yekun) [yekun cem],
        sum(guzest) [guzest cem] 
  from sm_sob_emel  
 group by Month(tarix) 
 order by Month(tarix)
`


	select surname, count (name)  as say from asa  group by surname -- eyni soyaddaolan adamlarin sayi
--(mentiq budurki cem, say ve s . aggregate funksiya istiade etdikden sonra neye gore qruplasdiriqsa onu yaziriq group by-a)
----group by en sonda yazilir where sertinden sonra 


	select surname,sum(ceki) as [umumi ceki] from asa group by surname   --eyni soyadda olanlarin umumi cekilerini ekrana cxardir 


select surname,avg(ceki) as [ortalama] from asa  group by surname   --eyni soyadda olanlarin orta cekilerini ekrana cxardir


	select surname ,MAX(ceki),MIN(ceki) from asa group by surname  -- soyad uzre maximum cekide olani ve yaninda hemin soyad uzre en asag cekide olanlari cxarir




select sheher ,SUM (ceki) [cheki]  from asa  group by sheher having COUNT(sheher)>2  


	
insert into asb select * from asa  -- hazir asb tablesin asa-daki columnlari artirir(column ardicilligina fikir vermek lazimdi)

  insert into asb(name,surname,ceki,sheher) select * from asa  -- secilen columnlara uygun melumatlari artiri

		-- diqeet etmek lazimdi columnlarin tipi eyn olsun ve eyni sayda colunu olsun

select * into asb from asa    -- asb adli cedvel yaradib icine asa-daki melumatlari artirir
	  select name into asd from asa  --asa-daki name-lerden ibaret asd adli cedvelyaratdi(column;arin sayini artirmaq olar)

			


	 select * from asa
	intersect
	 select * from asb   -- her iki cedvelde eyni olan sutunlari cixarir(joinlerden biridi) * evezine  konkret column yazib yoxlamaq ola
	 
	 
	 
	  select * from asa
	  except
	  select * from asb   -- asa-da  olub asb-de olmayan sutunlari cixarir(joinlerden biridi) * evezine  konkret column yazib yoxlamaq ola
	 



	  select idn from asb
	  except
	  select es_no from asa   -- meselen  idn-de olub es_no-da olmayn setirleri cixarir (inteersecte de aiddi)  

union all ile union ferqi

		-- union all butun setirleri oldugu kimi artirir sonra diger cedveldeki butun setirleri ekrana cixarir

		-- union eger tekrardisa bunu 1 dfe cixarir
			-- esas sheert buduki alt alta columnlar eyni tipde olmalidi

select * from asa
union all
select * from asb


	  select * from asb where surname =(select surname from asa where surname='asraf') -- eger altsorgudan bir deyer qaydarsa
	  
	  
	  select * from asb where surname in(select surname from asa where surname='cafarli') -- eger bir nece deyer qayidarsa in ile serte yazmaq olar

select name,(select surname from asa where name='asraf') from asb 


			--transaction

Begin:   -- emeliyyat baslangici
Rollbck:   --emeliyyati geri alma/texire salma
Commit:  - emeliyyati yaddasa verme


for example
	  begin transaction
	  update asa set name='asdfg'
	  select * from asa
	  rollback
						--burada update edib neticeni ekrana verdik ancaq rollbaxk etdiyimizden yaddasa yazilmadi deisiklikler. eger commit yazsaydiq tesdiqlemis olardiq
	  select * from asa
						--neticelaraq burda evvelki netice(update etmemisden evvelki) cixir ekrana


						------Tsql - Transact sql

deyisken , prosedur yazmaq , funksiya yazmaq, trigger yazmaq ve s. 
				declare deisen tanima



			declare			-- declare ile deisen tanyiriq mutleq shekilde qarsida @ olmalidir
set				-- set ile deisene deyer veririk  deisen adi @ ile baslamagina diqqet etme lazimdi
print           -- select-den eerqli olaraq prnt ile deiseni capa versek o select kimi tablede yox message kimi cxacaq ve onu silib ve ya ustunde deisikliketmek olar



declare @sheher nvarchar(25)  -- burada nvarchar tipinde bir deisen tanidiq
declare @kend  nvarchar(25)
 set @sheher ='Yevlax'        --sheher adli deisene   'ashraf' yazisini menimsetdik
 set @kend='Xaldan'

	print @sheher+ 'in kendi ' +@kend    -- cvb    Yevlagin kendi Xaldan


			--sade emeliyyatlar

				
	
	declare @a int,@b int ,@c int 
	set @a=5 
	set @b=3
	set @c=@a+@b
	select @c   -- netice  8
	select @a*@c  -- netice 40
	select @c/@a  --netice 1 (int tipinde bolduyunden)

eger biz bunu nvarchar tipli bir ededle eyni sutunda cxartmaq stesek xeta verecek cunki tipi intdi yeni meselen
	select 'cavab : '+a --sehv verecek a-int  cavab -varchartipinde oldugundn b

				--cast yuxaridaki prblemi hell etmek ucun cast derek tipi deismek lazimdi  yazilisi:
					cast(@a as nvarchar) -- int tipinde olan a-ni nvaxrhar tipine cevirir

misal:
					
	declare @a int,@b int ,@c int 
	set @a=5 
	set @b=3
	set @c=@a+@b
	select  ' cavab : '+   cast(@c as nvarchar)    -- neticede ekranda goruntu  			cavab : 8  

ve yaxud 


	print ' cavab : '+   cast(@c as nvarchar)  

	@c=power(@a+@b,2)	  -quvvet
	@c=sqrt(@a+@b)   	  -kokalti


					-- table tipi yaratmaq declare ile
t-sql-de  table de yarataq lazim ancaq oradaki yaradilan emeliyyatlar her biri db-a yuklenir programmngdeki kimi hemin deisenler islediyi muddet erzinde isleyir meselen




	declare  @t2 table(idn int,name nvarchar(20))  --t2 adinda bir deisen(table yaratdiq)
	insert into @t2 values (1,'asraf')
	insert into @t2 values (2,'samir')
	
	select * from @t2	 -- bu emeliyyatlara birlikde run etdikde isleyir ve netice ekrana cixir
		--ancaq biz ayri-ayriliqda insertu ve selecti etsek seehv verecek cunki eyni anda ise dusmur ve o deisenler db-a daimi yazilmr

			 --example  	
declare @name nvarchar(25), @surname nvarchar(25)
	set @name='asdfg'
	set @surname ='2asdfghj'
	insert into heshim values (@name,@surname)
	
	select * from Anbar_db..heshim



				--output comandalari	(deleted ve inserted)
declare  @t2 table(name nvarchar(20),surname nvarchar(20))  
insert into heshim 
output inserted.name, inserted.surname       -- output hissesinde ekrana elave olunan melumatlari getrecek(inserted outputun komandasidi)
into @t2 values('asraf','ceferli')		--into komandasi elave olunani getirir		

select * from @t2							--yeni ekrana neyi elaveetmisikse onu cxaracaq asraf ve ceferli-ni
select * from heshim		




	
declare  @t2 table(name nvarchar(20),surname nvarchar(20))  
delete from heshim
output deleted.name, deleted.surname       -- output hissesinde ekrandan silinen  melumatlari getrecek
into @t2 where name='asraf'

select * from @t2							--yeni ekrandan neyi silmisikse onu cxaracaq asraf ve ceferli-ni
select * from heshim						--burada artiq hein sutunlar yoxdur